<h2 id="introduction">Introduction</h2>
<h3 id="objectives">Objectives</h3>
<p>The overarching goal of the Transparent Assessment Framework (TAF,
Magnusson and Millar 2023) is to support <em>open and reproducible</em>
research. To achieve this goal, the following objectives have guided the
design of TAF:</p>
<ol type="1">
<li><p>Provide a standard workflow structure that is general enough for
any analysis that can be run from R.</p></li>
<li><p>Introduce minimal constraints or learning curve, making it easy
for a beginner to create a new workflow or convert an existing workflow
to TAF format.</p></li>
<li><p>Enable reviewers to browse the data, model settings, and results,
without being experts in R or the specific methods used.</p></li>
<li><p>Enable anyone to rerun the analysis on another computer and get
the same results.</p></li>
<li><p>Require the scientist to briefly describe the data that are used
in the analysis and where they came from.</p></li>
<li><p>Invite the scientist to document with scripts how they processed
the data before feeding them to the model.</p></li>
<li><p>Invite the scientist to specify which versions of software are
used, so the original analysis can be rerun at a later time.</p></li>
</ol>
<h3 id="design">Design</h3>
<p>TAF divides a workflow into four steps:</p>
<table>
<thead>
<tr class="header">
<th>Script</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong><code>data.R</code></strong></td>
<td>Prepare data, write CSV tables</td>
</tr>
<tr class="even">
<td><strong><code>model.R</code></strong></td>
<td>Run model</td>
</tr>
<tr class="odd">
<td><strong><code>output.R</code></strong></td>
<td>Extract results, write CSV tables</td>
</tr>
<tr class="even">
<td><strong><code>report.R</code></strong></td>
<td>Plots and tables for report</td>
</tr>
</tbody>
</table>
<p>These scripts all share the same general structure, starting with
loading packages and reading in files, then performing computations and
writing out files. They are run sequentially in alphabetical order,
where each script reads from files created in a previous step.</p>
<p>The initial data that are used in the analysis are declared in a file
called <code>DATA.bib</code>, which is processed by the
<code>taf.boot()</code> function. During this boot procedure, each data
entry is processed and the TAF system then makes the data available in
the <code>boot/data</code> subfolder, where the <code>data.R</code>
script will read it.</p>
<div style="text-align:center">
<img src="figs/diagram.png" width="400">
</div>
<p>The <code>SOFTWARE.bib</code> file is optional. It is not used in the
following linear regression example, but its functionality is covered in
the <a
href="#the-boot-procedure">boot procedure</a> section below.</p>
<h2 id="running-a-taf-analysis">Running a TAF analysis</h2>
<h3 id="linear-regression-example">Linear regression example</h3>
<p>To demonstrate how a TAF analysis works, consider a simple linear
regression where the <em>x</em> and <em>y</em> coordinates come from a
text file. The <code>linreg</code> example comes with the TAF package
and can be copied to a convenient place to test and run:</p>
<p>```{r} #| include: false</p>
<p>unlink(“linreg”, recursive=TRUE)</p>
<pre><code>
```{r}
#| output: false

library(TAF)
taf.example(&quot;linreg&quot;)
setwd(&quot;linreg&quot;)</code></pre>
<h3 id="boot-and-run">Boot and run</h3>
<p>Before running the analysis, the workflow consists of a
<code>boot</code> folder and four TAF scripts:</p>
<div style="text-align:center">
<img src="figs/explorer_1.png" width="100">
</div>
<p>To run a TAF analysis, the first step is to start R and make sure
that the current working directory is set to the location of the TAF
scripts <code>data.R</code>, <code>model.R</code>, etc. Some R editors
do this automatically when opening an R script and in RStudio there is a
menu command: <em>Session - Set Working Directory - To Source File
Location</em>.</p>
<p>All TAF analyses can be run using the following commands in R:</p>
<p>```{r} #| eval: false</p>
<p>library(TAF) taf.boot() source.all()</p>
<pre><code>
```{r}
#| include: false

setwd(&quot;linreg&quot;)  # this is for the vignette to run, not for the user
library(TAF)
taf.boot()
source.all()</code></pre>
<p>The <code>taf.boot()</code> function looks for an existing
<code>boot</code> folder to set up the data and software required for
the analysis. Then <code>source.all()</code> runs the
<code>data.R</code>, <code>model.R</code>, <code>output.R</code>, and
<code>report.R</code> scripts in that order. The individual scripts can
also be run using <code>source()</code> or line by line in an R
editor.</p>
<p>After running the analysis, each script has created a corresponding
folder, <code>data.R</code> creating a <code>data</code> folder,
etc.</p>
<div style="text-align:center">
<img src="figs/explorer_2.png" width="100">
</div>
<h3 id="structured-scripts">Structured scripts</h3>
<h4 id="general-structure">General structure</h4>
<p>The <code>data.R</code> script has populated the <code>data</code>
folder with comma-separated values (CSV) files representing the data
that are used in the analysis and the <code>model.R</code> script
produced <code>model</code> results in a machine-readable format. The
purpose of the <code>output.R</code> script is to read the results from
the <code>model</code> folder and write out CSV files representing the
results that are of primary interest. Finally, <code>report.R</code>
reads in the CSV output and produces plots and formatted tables, often
with rounded numbers, which can be incorporated into a report. The
<code>report.R</code> script can also produce a dynamic document in
various formats if the scientist writes the script in that way.</p>
<p>It is important to note that TAF does not do any of this by itself.
All the work is performed by the R scripts that the scientist writes.
Typically, a TAF script has the following general structure:</p>
<p>```{r} #| eval: false</p>
<h1 id="what-the-script-does">What the script does</h1>
<h1 id="before-file1.csv-file2.rds-file3.spec-previous">Before:
file1.csv, file2.rds, file3.spec (previous)</h1>
<h1 id="after-file4.csv-file5.csv-file6.png-folder">After: file4.csv,
file5.csv, file6.png (folder)</h1>
<p>library(TAF) library(SomePackage) source(“utilities.R”)</p>
<p>mkdir(“folder”)</p>
<h1 id="read-files-from-previous-step">Read files from previous
step</h1>
<p>dat1 &lt;- read.taf(“previous/file1.csv”) dat2 &lt;-
readRDS(“previous/file2.rds”) dat3 &lt;-
importSpecial(“previous/file3.spec”)</p>
<h1 id="some-computations">Some computations</h1>
<h1 id="section">[…]</h1>
<h1 id="write-out-tables-and-plots">Write out tables and plots</h1>
<p>write.taf(dat4, dir=“folder”) write.taf(dat5, dir=“folder”)
taf.png(“file6”) SpecialPlot(dat6) dev.off()</p>
<pre><code>
A TAF script traditionally starts with a comment section that provides a brief
description of what the script does, followed by a description of the state
before and after the script is run, in terms of input and output files. In the
pseudocode example above, the input files are in various formats that are not
necessarily CSV format.

The next section loads the TAF package and specific packages that are required
for the analysis. This section may also load functions that the scientist has
written and stored in a dedicated file that could be called `utilities.R`. This
is also a convenient time to create the directory for the output files of this
script. Using the TAF function `mkdir()` rather than the base R function
`dir.create()` has the minor benefit of not producing a warning if the directory
already exists, which is sometimes the case.

Likewise, the TAF function `read.taf()` is similar to the base R function
`read.csv()` but with some sensible defaults and useful features for typical TAF
workflows. The RDS file format can be practical to read and write list-like
objects in R, while `importSpecial()` in the above example is a function
provided by `SomePackage` to import a software-specific file format. The TAF
functions `write.taf()` and `taf.png()` are equivalent to the base R functions
`write.csv()` and `png()` with some sensible defaults and useful features for
TAF workflows.

#### File organization

An important observation in computer science (Spolsky 2004) is that it is harder
to read code than to write it. For analytical work, this poses challenges for
scientific reviews and the reuse of code at a later time, often by another
person. TAF addresses this challenge by structuring a workflow in four separate
scripts, each handling a clear and well-defined task, rather than in one
monolithic script that does everything.

A medium-sized scientific workflow might consist of `data.R`, `model.R`,
`output.R`, and `report.R`, each around 100 lines of code. In a larger workflow,
where some of these steps might require a few hundred lines of code, TAF invites
the scientist to organize the work in smaller steps. For example, a very short
`output.R` script could call secondary scripts such as `output_parameters.R`,
`output_predictions.R`, and `output_likelihoods.R`. To keep scripts short and
readable, the scientist can write functions and store them inside `utilities.R`,
allowing lengthy or repeated computations to be performed in a single line in
the scripts.

The CSV file format is default and convenient for saving tables in the `data`,
`output`, and `report` folders, while the `model` folder contains results in any
format, often determined by the software used in the analysis. For plots, the
PNG file format is commonly used in TAF analyses, which can then be incorporated
into reports in Word, HTML, or other formats. PDF is another file format for
plots, practical for bundling many plots together in a multipage file. All other
file formats provided by R can be used.

## TAF features

### The boot procedure

Similar to booting a computer, the TAF boot procedure readies the data and
software components that are required for subsequent computations. The boot
procedure takes place inside the `boot` folder, where the `taf.boot()` function
looks for files called `DATA.bib` (required) and `SOFTWARE.bib` (optional).

As indicated by the `bib` file extension, TAF metadata entries follow the BibTeX
format (Patashnik 2003) originally designed for bibliographic information. One
of the benefits of using the BibTeX format for TAF metadata is that information
about all R packages is already available in this format, for example:

```{r}
#| eval: false

citation(package=&quot;TAF&quot;)</code></pre>
<p>In the <code>linreg</code> example, the <code>DATA.bib</code> file
contains a single metadata entry:</p>
<pre><code>@Misc{ezekiel.txt,
  originator = {Mordecai Ezekiel},
  year       = {1930},
  title      = {Speed of automobile and distance to stop after signal},
  source     = {file},
}</code></pre>
<p>Most of the metadata are meant to be informative and the values are
not subject to strict rules. The metadata example above informs us that
the data were prepared by Mordecai Ezekiel for an analysis conducted in
1930. The only metadata fields that are parsed by
<code>taf.boot()</code> are the reference key <code>ezekiel.txt</code>
and source = <code>file</code>.</p>
<p>The source field specifies where data or software originate from. The
following types of values can be used in the source field:</p>
<ol type="1">
<li><p>GitHub reference of the form
<code>owner/repo[/subdir]@ref</code>, identifying a specific version of
a GitHub resource.</p></li>
<li><p>URL, identifying a file to download.</p></li>
<li><p>Special value <code>script</code>, indicating that a boot script
(a custom R script) should be run to fetch or produce files.</p></li>
<li><p>Relative path starting with <code>initial</code>, identifying the
location of a file or directory somewhere inside the
<code>boot/initial</code> folder.</p></li>
<li><p>Special value <code>file</code> or <code>folder</code>,
indicating that the file or folder is inside
<code>boot/initial/data</code> or
<code>boot/initial/software</code>.</p></li>
</ol>
<p>In the <code>linreg</code> example, the boot procedure simply copies
<code>ezekiel.txt</code> from <code>boot/initial/data</code> to
<code>boot/data</code>, where it is now available for subsequent
computations. In other TAF workflows, <code>DATA.bib</code> may bring in
data from multiple sources, involving local and remote databases, online
data repositories, and GitHub resources.</p>
<p>When metadata entries in <code>SOFTWARE.bib</code> point to R
packages, they are installed in a local library for that workflow. The
<code>SOFTWARE.bib</code> file is where the scientist can specify the
exact version of key software components that were used in the analysis,
pointing to specific releases, tags, or commits of each software to
strengthen reproducibility.</p>
<p>The TAF package comes with utility functions
<code>draft.data()</code> and <code>draft.software()</code> that
facilitate the creation of the <code>DATA.bib</code> and
<code>SOFTWARE.bib</code> files. The online TAF <a
href="https://github.com/ices-taf/doc/wiki/Bib-entries">Wiki</a>
provides more details and examples of metadata entries.</p>
<h3 id="creating-a-new-analysis">Creating a new analysis</h3>
<p>When authoring a TAF analysis, one can either start with a similar
workflow and adapt it to the current analysis or start with a new
workflow. The <code>taf.skeleton()</code> function creates a new
workflow, consisting of an empty <code>boot/initial/data</code> folder
and the four TAF scripts: <code>data.R</code>, <code>model.R</code>,
<code>output.R</code>, and <code>report.R</code>. Each script provides a
starting point for that step of the analysis, for example, a new
<code>data.R</code> script contains the following lines:</p>
<pre><code># Prepare data, write TAF data tables

# Before:
# After:

library(TAF)

mkdir(&quot;data&quot;)</code></pre>
<p>After running <code>taf.skeleton()</code> to create a new TAF
workflow, the scientist can populate the <code>boot/initial/data</code>
folder with initial data files and run
<code>draft.data(file=TRUE)</code> to produce a <code>DATA.bib</code>
file.</p>
<p>The next step is then to run <code>taf.boot()</code> to populate the
<code>boot/data</code> folder and start editing the <code>data.R</code>
script, reading files from the <code>boot/data</code> folder.</p>
<h3 id="overview-of-functions">Overview of functions</h3>
<p>Several functions from the TAF package have been mentioned in this
introduction:</p>
<p><em>Initial TAF steps</em></p>
<ul>
<li><code>draft.data</code></li>
<li><code>draft.software</code></li>
<li><code>taf.boot</code></li>
<li><code>taf.example</code></li>
<li><code>taf.skeleton</code></li>
</ul>
<p><em>Running scripts</em></p>
<ul>
<li><code>source.all</code></li>
</ul>
<p><em>File management</em></p>
<ul>
<li><code>mkdir</code></li>
<li><code>read.taf</code></li>
<li><code>write.taf</code></li>
</ul>
<p><em>Plots</em></p>
<ul>
<li><code>taf.png</code></li>
</ul>
<p>The TAF package provides many other functions that can be useful but
are not required for authoring or running TAF workflows. Several TAF
functions are designed to support running the same analysis across
different operating systems and locales, and every function comes with a
help page that includes examples and cross-references. Furthermore,
typing <code>?TAF</code> opens a package help page that gives an
overview of all the functions in the package, grouped by
functionality.</p>
<h2 id="the-taf-community">The TAF community</h2>
<h3 id="browsing-an-existing-analysis">Browsing an existing
analysis</h3>
<p>Most TAF analyses are organized on GitHub, either in public or
private repositories, although the TAF design does not require GitHub.
Public repositories are a common standard for open and reproducible
research, while private repositories can also be used, e.g., when data
are sensitive and cannot be shared.</p>
<p>TAF repositories often contain the workflow in a ready-to-run state
that does not include the results. This means that anyone browsing that
analysis will need to run the workflow to see the results, in the same
way as the <code>linreg</code> example. The advantage of this is a
guarantee that a repository does not contain scripts and results that
might be out of sync. On the other hand, uploading the results to the
repository may be a good choice if the analysis takes a long time to
run, or to facilitate scientific review without requiring the reviewer
to install software or learn how to run TAF analyses.</p>
<p>A TAF analysis on GitHub can be reviewed directly in a web browser,
where the code is presented in a readable format and tables and plots
are also easy to view. For a fuller review, the analysis can be
downloaded or cloned, allowing the reviewer to open and analyze the
contents of CSV tables in a spreadsheet, R, or other statistical
software of choice. Furthermore, the reviewer can modify and rerun the
analysis, evaluating the effect of alternative methods and model
assumptions.</p>
<h3 id="related-r-packages">Related R packages</h3>
<h4 id="icestaf">icesTAF</h4>
<p>The development of TAF workflows started in 2016 when the authors of
this vignette were hired as full-time developers at the International
Council for the Exploration of the Sea (ICES), an international
organization with 20 member countries collaborating in marine science.
The aim was to develop a new framework for organizing ICES analyses,
improving reviewability and reproducibility.</p>
<p>In 2017, the first version of the <code>icesTAF</code> package
(Millar and Magnusson 2023) was released on CRAN, followed by later
version updates. In 2021-2022, the package was split into two separate
but related packages:</p>
<ol type="1">
<li><p>TAF provides the core functionality and has no package
dependencies.</p></li>
<li><p>icesTAF loads all of TAF and adds additional features that are
primarily used within ICES and may depend on external packages.</p></li>
</ol>
<p>ICES workflows use the icesTAF package, benefiting from access to a
dedicated ICES TAF server, ICES databases, and other infrastructure.
Other workflows that are not related to ICES use the smaller TAF package
and reap the various benefits of zero package dependencies.</p>
<p>The development and maintenance of TAF and icesTAF is tightly
synchronized, with new CRAN releases occurring within days of each other
and using the same version number.</p>
<h4 id="makeit">makeit</h4>
<p>The <code>make()</code> function, a part of the TAF package since
2017, is a powerful tool to run only the parts of a workflow where the
underlying files have changed. For example, after plot scripts are
modified, those scripts should be rerun to update the plots in seconds,
without rerunning the entire workflow that might take minutes or
hours.</p>
<p>The TAF package contains the <code>make()</code> function, along with
the related <code>make.taf()</code> and <code>make.all()</code>
functions. These expert tools are not promoted for general use in TAF
tutorials or introductory workshops, but they are useful for working
with TAF at scale, managing, checking, and debugging a large number of
workflows, providing support to multiple users at the same time,
etc.</p>
<p>As the name implies, the <code>make()</code> function is closely
based on the shell command of the same name (Stallman et al. 2023) but
implemented in R. As a generally useful tool beyond the context of TAF
workflows, the <code>make()</code> function was eventually packaged and
released on CRAN in its own package called <code>makeit</code> in 2023.
The <code>makeit</code> package (Magnusson 2025) contains annotated
examples and a discussion.</p>
<h4 id="sofia">SOFIA</h4>
<p>The UN Food and Agriculture Organization (FAO) monitors the status of
global marine resources and publishes a summary report (FAO 2024) every
two years, known as SOFIA. The work behind this publication involves
organizing and conducting analyses of hundreds of fish and invertebrate
stocks from all the world’s oceans.</p>
<p>FAO is currently undertaking a methodological update that leverages
advancements in computing and data availability to enhance the
understanding of the state of the world’s fish stocks (Sharma 2023). One
part of this restructuring is the adoption of TAF, which provides a
standard structure that supports open and reproducible research. The
SOFIA package (Magnusson and Sharma 2024) is a collection of tools to
facilitate this work.</p>
<h4 id="targets">targets</h4>
<p>The <code>targets</code> package (Laundau 2021) has somewhat similar
objectives as TAF, to organize and run computational workflows. A key
distinction between the packages is that in TAF the user organizes their
workflow by writing <em>scripts</em> that produce <em>files</em>, but in
<code>targets</code> the user organizes their workflow by writing
<em>functions</em> that produce <em>objects</em>, to be passed to the
next step. Thus, the two packages present two different paradigms with a
similar end result.</p>
<p>A TAF workflow structure is predetermined, as the main scripts will
always be named <code>data.R</code>, <code>model.R</code>,
<code>output.R</code>, and <code>report.R</code>. After running a TAF
analysis, one can always expect to find the data and results in CSV
format in the <code>data</code>, <code>output</code>, and
<code>report</code> folders. In contrast, the <code>targets</code>
package does not confine the user to a predetermined workflow design,
and tables containing data and results are generally accessed by the
user as R objects rather than files.</p>
<p>The <code>targets</code> package requires a higher level of R
expertise than TAF, both for the scientist to design a workflow using
interconnected functions, and for a reviewer to browse the data, model
settings, and results. The utility functions that come with TAF are for
basic data and file management, while the utility functions that come
with <code>targets</code> are for parallel computations and a variety of
cloud services.</p>
<h4 id="renv">renv</h4>
<p>The <code>renv</code> package (Ushey and Wickham 2025) allows the
scientist to save information about all R packages and their version
when used in an analysis, with the intention to allow the workflow to be
rerun at a later time and produce the same results as the original
analysis. The <code>renv</code> package only looks at R packages, but
for long-term reproducibility there is a wider domain of software that
can change over time, such as the version of R, external software used
in the analysis, and the operating system.</p>
<p>The built-in approach in TAF is to focus the documentation in
<code>SOFTWARE.bib</code> only on the key software used in the analysis.
Calling <code>taf.boot()</code> will then set up these packages and
software in a local boot folder. In our experience with TAF, if the
scientist has declared the exact version of key software components that
were used in the analysis inside the <code>SOFTWARE.bib</code> file,
then it is relatively easy to rerun some years later.</p>
<p>For analyses where <code>SOFTWARE.bib</code> is not the right tool to
manage software versions, TAF can be used in combination with the
<code>renv</code> package, <code>rig</code> (Csárdi 2024), Docker
(Merkel 2014), and other tools dedicated to reproducible research.</p>
<h2 id="discussion">Discussion</h2>
<h3 id="contents-of-a-taf-analysis">Contents of a TAF analysis</h3>
<p>A common question about TAF is “Can TAF do <em>X</em>?”, where
<em>X</em> is some desired functionality. The answer is yes, if it can
be done using R scripts, but TAF is not going to do it by itself. The
work performed by TAF is what the scientist has written in the scripts.
Thanks to the general nature of the R language and the extensive
selection of available packages, R scripts can do a wide variety of
things, including running software written in other languages than
R.</p>
<p>Incremental development of TAF analyses usually takes place in a
GitHub repository that can be kept private while the work is ongoing and
then made public once the analysis is ready for presentation. There are
essentially three paths to produce a TAF analysis: (1) start from
scratch using <code>taf.skeleton()</code>, (2) start from a template
such as <code>taf.example("linreg")</code> or another existing TAF
analysis, or (3) add TAF scripts to an already completed analysis that
was independent of TAF, to strengthen its reproducibility and
reviewability.</p>
<p>Among the online examples, one-off analyses such as <a
href="#corona">corona</a>, <a href="#weather">weather</a>, and <a
href="#trip">trip</a> are created from scratch, while
<a href="#ices">ICES</a> and <a href="#fao">FAO</a> analyses are often
based on existing templates. The SPC analyses of
<a href="#yellowfin">yellowfin</a> and <a
href="#albacore">albacore</a> tuna are examples where the model
development and model fitting is conducted independent of TAF using Bash
shell scripts, but TAF scripts are added afterwards to showcase the data
and results of the analysis.</p>
<p>The <a href="#skipjack">skipjack</a> growth analysis is an example
where only the scripts can be made public, as the data are sensitive and
cannot be shared. Sharing the scripts allows review and reuse of the
methods used in the analysis and the TAF repository serves as a
technical annex of the published report. The initial data should be
included in the TAF repository if the data are not sensitive, allowing
anyone to rerun the analysis and explore modifications of the
analysis.</p>
<p>For review purposes, the folders produced by running the TAF analysis
can also be uploaded, allowing anyone to browse the <a
href="https://github.com/PacificCommunity/ofp-sam-yft-2023-diagnostic/tree/main/TAF/data">data</a>
and <a
href="https://github.com/PacificCommunity/ofp-sam-yft-2023-diagnostic/tree/main/TAF/output">output</a>
in CSV format, along with <a
href="https://github.com/PacificCommunity/ofp-sam-yft-2023-diagnostic/tree/main/TAF/report">plots</a>,
typically in PNG or PDF format. This is especially helpful for a
scientific committee reviewing the analyses, as well as anyone else who
would like to browse and use these public data.</p>
<p>It’s worth noting that although CSV is the default file format for
tables produced by the <code>data.R</code> and <code>output.R</code>
scripts, the files inside the <code>boot/initial/data</code> folder can
be in any format. The recommendation in TAF is to use the original
format that the scientist received the data in, and then use TAF scripts
to document the entire data import and preparation. Initial data files
can thus be a combination of text files (<code>.csv</code>,
<code>.dat</code>, <code>.txt</code>), R data files (<code>.rds</code>,
<code>.RData</code>), zip archives (<code>.zip</code>,
<code>.tar.gz</code>), spreadsheets (<code>.xlsx</code>,
<code>.ods</code>), and so on. Better still, boot scripts can be used to
query databases or fetch data from online resources that often have some
level of data quality checks and documentation.</p>
<h3 id="benefits-of-taf">Benefits of TAF</h3>
<p>The TAF <a href="#design">design</a> is intuitive and practical,
dividing any analysis into four steps, which makes the code easy to
organize, read, extend, and reuse. For the scientist, the modular
scripts offer a task-oriented focus, separation of concerns, and a
structure that facilitates revisiting and debugging code. For
international organizations and scientific workplaces, TAF can provide
an agreed way to work on analytical workflows that can enhance
collaboration, review processes, and institutional memory when new staff
inherit earlier workflows.</p>
<p>TAF itself is intentionally low tech, simply running four scripts one
after the other, and this basic design allows it to be paired with
specialized software of arbitrary complexity. Custom boot scripts can be
written to fetch data and set up specific software, and the TAF scripts
can apply any technologies available to R, which may include running
external software. If the need arises, TAF could also be implemented in
Python or some other language, as a simple native library that would run
data, model, output, and report scripts, independent of R.</p>
<p>The last step of a TAF workflow, the report step, can be omitted if
the CSV tables produced by the output step are the only results needed,
but most TAF analyses use the report step to produce plots and formatted
tables. The report step can also be used to produce dynamic reports or
interactive media, using R Markdown, Quarto, Shiny, or other
methods.</p>
<p>The simple and general design of TAF, compatible with a wide range of
technologies while dependent on none, has proven both stable and easy to
adapt to a continually evolving ecosystem of available software.</p>
<h2 id="acknowledgements">Acknowledgements</h2>
<p>We are grateful for the support from our ICES colleagues, Lotte
Worsøe Clausen, Neil Holdsworth, Nils Olav Handegard, and Iago Mosqueira
for overseeing the TAF development project, Alexandros Kokkalis, Ibrahim
Umar, and Hjalte Parner for contributing code, and Cecilia Kvaavik and
Luca Lamoni for supporting the ICES TAF user community. We thank Rishi
Sharma and Pedro Barros at FAO for their support and for selecting TAF
for analyzing the status of global marine resources. We also thank Paul
Hamer and Graham Pilling at SPC for their support and for selecting TAF
for making the data and results from Pacific tuna and billfish analyses
available as open science.</p>
<h2 id="references">References</h2>
<p>Csárdi, G. (2024). rig: The R Installation Manager. Version
0.7.0.<br />
<a href="https://github.com/r-lib/rig"
class="uri">https://github.com/r-lib/rig</a></p>
<p>Food and Agriculture Organization (FAO). (2024). <em>The State of
World Fisheries and Aquaculture 2024: Blue Transformation in
Action.</em> Rome.<br />
<a href="https://doi.org/10.4060/cd0683en"
class="uri">https://doi.org/10.4060/cd0683en</a></p>
<p>Landau, W.M. (2021). The targets R package: a dynamic Make-like
function-oriented pipeline toolkit for reproducibility and
high-performance computing. <em>Journal of Open Source Software</em>,
6(57), 2959.<br />
<a href="https://doi.org/10.21105/joss.02959"
class="uri">https://doi.org/10.21105/joss.02959</a>, <a
href="https://cran.r-project.org/package=targets"
class="uri">https://cran.r-project.org/package=targets</a></p>
<p>Magnusson, A. (2025). makeit: Run R Scripts if Needed. R package
version 1.0.2.<br />
<a href="https://cran.r-project.org/package=makeit"
class="uri">https://cran.r-project.org/package=makeit</a></p>
<p>Magnusson, A. and Millar, C. (2023). TAF: Transparent Assessment
Framework for Reproducible Research. R package version 4.2.0.<br />
<a href="https://cran.r-project.org/package=TAF"
class="uri">https://cran.r-project.org/package=TAF</a></p>
<p>Magnusson, A. and Sharma, R. (2024). SOFIA: Tools to Work with SOFIA
Analyses. R package version 2.1.3.<br />
<a href="https://github.com/sofia-taf/SOFIA"
class="uri">https://github.com/sofia-taf/SOFIA</a></p>
<p>Merkel, D. (2014). Docker: lightweight Linux containers for
consistent development and deployment. <em>Linux Journal</em>, 239,
76-91.<br />
https://dl.acm.org/doi/pdf/10.5555/2600239</p>
<p>Millar C. and A. Magnusson. (2023). icesTAF: Functions to Support the
ICES Transparent Assessment Framework. R package version 4.2.0.<br />
<a href="https://cran.r-project.org/package=icesTAF"
class="uri">https://cran.r-project.org/package=icesTAF</a></p>
<p>Patashnik, O. (2003). BibTEX yesterday, today, and tomorrow.
<em>TUGboat</em>, 24, 25-30.<br />
<a href="https://tug.org/TUGboat/tb24-1/patashnik.pdf"
class="uri">https://tug.org/TUGboat/tb24-1/patashnik.pdf</a></p>
<p>Sharma, R. (2023). The state of world fishery resources: Expanding
efforts to determine the status of global fish stocks. <em>Research
Outreach</em>.<br />
<a
href="https://researchoutreach.org/wp-content/uploads/2023/05/Rishi-Sharma.pdf"
class="uri">https://researchoutreach.org/wp-content/uploads/2023/05/Rishi-Sharma.pdf</a></p>
<p>Spolsky, J. (2004). <em>Joel on Software: And on Diverse and
Occasionally Related Matters That Will Prove of Interest to Software
Developers, Designers, and Managers, and to Those Who, Whether by Good
Fortune or Ill Luck, Work with Them in Some Capacity.</em> Berkeley:
Apress.<br />
<a href="https://doi.org/10.1007/978-1-4302-0753-5"
class="uri">https://doi.org/10.1007/978-1-4302-0753-5</a></p>
<p>Stallman, R.M., McGrath, R., and Smith, P.D. (2023). <em>The GNU Make
Reference Manual.</em> Version 4.4.1.<br />
<a href="https://www.gnu.org/software/make/manual/make.html"
class="uri">https://www.gnu.org/software/make/manual/make.html</a></p>
<p>Ushey, K. and Wickham, H. (2025). renv: Project Environments. R
package version 1.1.2.<br />
<a href="https://cran.r-project.org/package=renv"
class="uri">https://cran.r-project.org/package=renv</a></p>
<h2 id="appendix">Appendix</h2>
<h3 id="online-examples">Online examples</h3>
<h4 id="introductory-notes">Introductory notes</h4>
<p>The online examples listed below come from international
organizations where TAF has been adopted to organize reproducible
workflows and present data, methods, and results as open science. The
organizations are the International Council for the Exploration of the
Sea (ICES), UN Food and Agriculture Organization (FAO), and the Pacific
Community (SPC). These examples are followed by a collection of
workflows covering domains outside of fisheries science.</p>
<h4 id="ices">ICES</h4>
<p>ICES maintains four core examples that demonstrate TAF analyses using
the <code>icesTAF</code> package. These simple workflows are used in
<code>icesTAF</code> workshops and system tests. They use only core TAF
functions, so the <code>library(icesTAF)</code> call at the top of each
script could be replaced with <code>library(TAF)</code> and produce the
same results.</p>
<table>
<colgroup>
<col style="width: 17%" />
<col style="width: 82%" />
</colgroup>
<thead>
<tr class="header">
<th></th>
<th><strong>2015_rjm-347d</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Analysis</td>
<td>Spotted ray in the North Sea</td>
</tr>
<tr class="even">
<td>Repository</td>
<td><a href="https://github.com/ices-taf/2015_rjm-347d"
class="uri">https://github.com/ices-taf/2015_rjm-347d</a></td>
</tr>
<tr class="odd">
<td>Methods</td>
<td>ICES method for data-limited stocks</td>
</tr>
<tr class="even">
<td>External deps</td>
<td>1 CRAN package</td>
</tr>
<tr class="odd">
<td>Data sources</td>
<td>2 local files</td>
</tr>
<tr class="even">
<td>Results</td>
<td>3 tables, 1 plot</td>
</tr>
<tr class="odd">
<td>Notes</td>
<td>Simple arithmetic, the <em>hello world</em> of icesTAF analyses</td>
</tr>
</tbody>
</table>
<p><br></p>
<table>
<colgroup>
<col style="width: 17%" />
<col style="width: 82%" />
</colgroup>
<thead>
<tr class="header">
<th></th>
<th><strong>2015_had-iceg</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Analysis</td>
<td>Haddock in Icelandic waters</td>
</tr>
<tr class="even">
<td>Repository</td>
<td><a href="https://github.com/ices-taf/2015_had-iceg"
class="uri">https://github.com/ices-taf/2015_had-iceg</a></td>
</tr>
<tr class="odd">
<td>Methods</td>
<td>Age-structured model, C++ standalone executable</td>
</tr>
<tr class="even">
<td>External deps</td>
<td>-</td>
</tr>
<tr class="odd">
<td>Data sources</td>
<td>1 local file</td>
</tr>
<tr class="even">
<td>Results</td>
<td>10 tables, 2 plots</td>
</tr>
<tr class="odd">
<td>Notes</td>
<td>Model executable is in bootstrap/initial/software</td>
</tr>
</tbody>
</table>
<p><br></p>
<table>
<colgroup>
<col style="width: 17%" />
<col style="width: 82%" />
</colgroup>
<thead>
<tr class="header">
<th></th>
<th><strong>2016_ple-eche</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Analysis</td>
<td>Plaice in the English Channel</td>
</tr>
<tr class="even">
<td>Repository</td>
<td><a href="https://github.com/ices-taf/2016_ple-eche"
class="uri">https://github.com/ices-taf/2016_ple-eche</a></td>
</tr>
<tr class="odd">
<td>Methods</td>
<td>Age-structured model, C++ standalone executable</td>
</tr>
<tr class="even">
<td>External deps</td>
<td>2 GitHub packages, many CRAN packages</td>
</tr>
<tr class="odd">
<td>Data sources</td>
<td>2 local files</td>
</tr>
<tr class="even">
<td>Results</td>
<td>14 tables, 2 plots</td>
</tr>
<tr class="odd">
<td>Notes</td>
<td>ggplot2 depends on many packages</td>
</tr>
</tbody>
</table>
<p><br></p>
<table>
<colgroup>
<col style="width: 17%" />
<col style="width: 82%" />
</colgroup>
<thead>
<tr class="header">
<th></th>
<th><strong>2016_cod-347d</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Analysis</td>
<td>Cod in the North Sea</td>
</tr>
<tr class="even">
<td>Repository</td>
<td><a href="https://github.com/ices-taf/2016_cod-347d"
class="uri">https://github.com/ices-taf/2016_cod-347d</a></td>
</tr>
<tr class="odd">
<td>Methods</td>
<td>Age-structured model, C++ standalone executable</td>
</tr>
<tr class="even">
<td>External deps</td>
<td>1 CRAN package</td>
</tr>
<tr class="odd">
<td>Data sources</td>
<td>13 local files</td>
</tr>
<tr class="even">
<td>Results</td>
<td>23 tables, 2 plots</td>
</tr>
<tr class="odd">
<td>Notes</td>
<td>Similar to Icelandic haddock example, just more parts</td>
</tr>
</tbody>
</table>
<h4 id="fao">FAO</h4>
<p>FAO uses the <code>SOFIA</code> and <code>sraplus</code> packages to
analyze the status of global marine resources. The <code>sraplus</code>
package comes with over 100 package dependencies. The precise number of
dependencies changes over time, as underlying packages change their
dependencies. The <code>sraplus-deps</code> analysis is a simple
workflow that describes the dependencies, while the
<code>WorkshopEffortShared</code> demonstrates a SOFIA-TAF analysis
using the <code>sraplus</code> package and a small dataset.</p>
<table>
<colgroup>
<col style="width: 17%" />
<col style="width: 82%" />
</colgroup>
<thead>
<tr class="header">
<th></th>
<th><strong>sraplus-deps</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Analysis</td>
<td>Dependency analysis of the sraplus package</td>
</tr>
<tr class="even">
<td>Repository</td>
<td><a href="https://github.com/sofia-taf-dev/sraplus-deps"
class="uri">https://github.com/sofia-taf-dev/sraplus-deps</a></td>
</tr>
<tr class="odd">
<td>Methods</td>
<td>pdeps(), a function to analyze package dependencies</td>
</tr>
<tr class="even">
<td>External deps</td>
<td>-</td>
</tr>
<tr class="odd">
<td>Data sources</td>
<td>Online (the sraplus software project)</td>
</tr>
<tr class="even">
<td>Results</td>
<td>2 tables, 1 plot</td>
</tr>
<tr class="odd">
<td>Notes</td>
<td>No local data files</td>
</tr>
</tbody>
</table>
<p><br></p>
<table>
<colgroup>
<col style="width: 17%" />
<col style="width: 82%" />
</colgroup>
<thead>
<tr class="header">
<th></th>
<th><strong>WorkshopEffortShared</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Analysis</td>
<td>FAO analysis of the relative status of marine stocks</td>
</tr>
<tr class="even">
<td>Repository</td>
<td><a href="https://github.com/sofia-taf/WorkshopEffortShared"
class="uri">https://github.com/sofia-taf/WorkshopEffortShared</a></td>
</tr>
<tr class="odd">
<td>Methods</td>
<td>sraplus, an R package</td>
</tr>
<tr class="even">
<td>External deps</td>
<td>2 GitHub packages, &gt;100 CRAN packages</td>
</tr>
<tr class="odd">
<td>Data sources</td>
<td>4 local files</td>
</tr>
<tr class="even">
<td>Results</td>
<td>6 tables, 16 plots</td>
</tr>
<tr class="odd">
<td>Notes</td>
<td>sraplus depends on many packages</td>
</tr>
</tbody>
</table>
<p><br></p>
<table>
<colgroup>
<col style="width: 17%" />
<col style="width: 82%" />
</colgroup>
<thead>
<tr class="header">
<th></th>
<th><strong>WorkshopEffortByStock</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Analysis</td>
<td>FAO analysis of the relative status of marine stocks</td>
</tr>
<tr class="even">
<td>Repository</td>
<td><a href="https://github.com/sofia-taf/WorkshopEffortByStock"
class="uri">https://github.com/sofia-taf/WorkshopEffortByStock</a></td>
</tr>
<tr class="odd">
<td>Methods</td>
<td>sraplus, an R package</td>
</tr>
<tr class="even">
<td>External deps</td>
<td>2 GitHub packages, &gt;100 CRAN packages</td>
</tr>
<tr class="odd">
<td>Data sources</td>
<td>4 local files</td>
</tr>
<tr class="even">
<td>Results</td>
<td>6 tables, 16 plots</td>
</tr>
<tr class="odd">
<td>Notes</td>
<td>sraplus depends on many packages</td>
</tr>
</tbody>
</table>
<h4 id="spc">SPC</h4>
<p>SPC uses TAF to make the results of tuna and billfish analyses
available online, inviting anyone to browse the data and results and/or
rerun the analysis.</p>
<div id="yellowfin">
<table>
<colgroup>
<col style="width: 17%" />
<col style="width: 82%" />
</colgroup>
<thead>
<tr class="header">
<th></th>
<th><strong>ofp-sam-yft-2023-diagnostic</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Analysis</td>
<td>Yellowfin tuna in the Western and Central Pacific</td>
</tr>
<tr class="even">
<td>Repository</td>
<td><a
href="https://github.com/PacificCommunity/ofp-sam-yft-2023-diagnostic"
class="uri">https://github.com/PacificCommunity/ofp-sam-yft-2023-diagnostic</a></td>
</tr>
<tr class="odd">
<td>Methods</td>
<td>Age-structured model, C++ standalone executable</td>
</tr>
<tr class="even">
<td>External deps</td>
<td>2 GitHub packages, many CRAN packages</td>
</tr>
<tr class="odd">
<td>Data sources</td>
<td>7 local files</td>
</tr>
<tr class="even">
<td>Results</td>
<td>24 tables, 4 plots</td>
</tr>
<tr class="odd">
<td>Notes</td>
<td>TAF analysis is organized inside a subdirectory</td>
</tr>
</tbody>
</table>
</div>
<p><br></p>
<div id="albacore">
<table>
<colgroup>
<col style="width: 17%" />
<col style="width: 82%" />
</colgroup>
<thead>
<tr class="header">
<th></th>
<th><strong>ofp-sam-alb-2024-diagnostic</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Analysis</td>
<td>South Pacific Albacore tuna</td>
</tr>
<tr class="even">
<td>Repository</td>
<td><a
href="https://github.com/PacificCommunity/ofp-sam-alb-2024-diagnostic"
class="uri">https://github.com/PacificCommunity/ofp-sam-alb-2024-diagnostic</a></td>
</tr>
<tr class="odd">
<td>Methods</td>
<td>Age-structured model, C++ standalone executable</td>
</tr>
<tr class="even">
<td>External deps</td>
<td>2 GitHub packages, many CRAN packages</td>
</tr>
<tr class="odd">
<td>Data sources</td>
<td>7 local files</td>
</tr>
<tr class="even">
<td>Results</td>
<td>22 tables, 4 plots</td>
</tr>
<tr class="odd">
<td>Notes</td>
<td>TAF analysis is organized inside a subdirectory</td>
</tr>
</tbody>
</table>
</div>
<p><br></p>
<div id="skipjack">
<table>
<colgroup>
<col style="width: 17%" />
<col style="width: 82%" />
</colgroup>
<thead>
<tr class="header">
<th></th>
<th><strong>ofp-sam-skj-2025-tag-growth-public</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Analysis</td>
<td>Skipjack tuna growth analysis</td>
</tr>
<tr class="even">
<td>Repository</td>
<td><a
href="https://github.com/PacificCommunity/ofp-sam-skj-2025-tag-growth-public"
class="uri">https://github.com/PacificCommunity/ofp-sam-skj-2025-tag-growth-public</a></td>
</tr>
<tr class="odd">
<td>Methods</td>
<td>Comparison of growth models fitting to tags and otolith data</td>
</tr>
<tr class="even">
<td>External deps</td>
<td>4 CRAN packages</td>
</tr>
<tr class="odd">
<td>Data sources</td>
<td>3 local files</td>
</tr>
<tr class="even">
<td>Results</td>
<td>34 tables, 10 plots</td>
</tr>
<tr class="odd">
<td>Notes</td>
<td>Public repository includes only scripts, not sensitive data</td>
</tr>
</tbody>
</table>
</div>
<h4 id="various">Various</h4>
<p>The following examples demonstrate various uses of TAF covering
domains outside of fisheries science.</p>
<table>
<colgroup>
<col style="width: 17%" />
<col style="width: 82%" />
</colgroup>
<thead>
<tr class="header">
<th></th>
<th><strong>taf-four-minutes</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Analysis</td>
<td>Comparison between TAF and targets</td>
</tr>
<tr class="even">
<td>Repository</td>
<td><a href="https://github.com/ices-taf-dev/taf-four-minutes"
class="uri">https://github.com/ices-taf-dev/taf-four-minutes</a></td>
</tr>
<tr class="odd">
<td>Methods</td>
<td>Linear regression</td>
</tr>
<tr class="even">
<td>External deps</td>
<td>Many CRAN packages</td>
</tr>
<tr class="odd">
<td>Data sources</td>
<td>1 local file</td>
</tr>
<tr class="even">
<td>Results</td>
<td>2 tables, 1 plot</td>
</tr>
<tr class="odd">
<td>Notes</td>
<td>Tidyverse workflow</td>
</tr>
</tbody>
</table>
<p><br></p>
<div id="corona">
<table>
<colgroup>
<col style="width: 17%" />
<col style="width: 82%" />
</colgroup>
<thead>
<tr class="header">
<th></th>
<th><strong>corona</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Analysis</td>
<td>COVID-19 cases and deaths by country</td>
</tr>
<tr class="even">
<td>Repository</td>
<td><a href="https://github.com/arni-magnusson/corona"
class="uri">https://github.com/arni-magnusson/corona</a></td>
</tr>
<tr class="odd">
<td>Methods</td>
<td>Basic arithmetic and plots, global and selected countries</td>
</tr>
<tr class="even">
<td>External deps</td>
<td>Many CRAN packages</td>
</tr>
<tr class="odd">
<td>Data sources</td>
<td>Online (Johns Hopkins University) and 1 local file</td>
</tr>
<tr class="even">
<td>Results</td>
<td>15 tables, 64 plots</td>
</tr>
<tr class="odd">
<td>Notes</td>
<td>Useful during the global epidemic to view the latest data</td>
</tr>
</tbody>
</table>
</div>
<p><br></p>
<div id="weather">
<table>
<colgroup>
<col style="width: 17%" />
<col style="width: 82%" />
</colgroup>
<thead>
<tr class="header">
<th></th>
<th><strong>weather</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Analysis</td>
<td>Compare climate in selected cities around the world</td>
</tr>
<tr class="even">
<td>Repository</td>
<td><a href="https://github.com/arni-magnusson/weather"
class="uri">https://github.com/arni-magnusson/weather</a></td>
</tr>
<tr class="odd">
<td>Methods</td>
<td>World map of UV, trigonometry for sunrise calculations, etc.</td>
</tr>
<tr class="even">
<td>External deps</td>
<td>3 CRAN packages</td>
</tr>
<tr class="odd">
<td>Data sources</td>
<td>Online (NASA Earth Observations) and 15 local files</td>
</tr>
<tr class="even">
<td>Results</td>
<td>5 tables, 12 plots</td>
</tr>
<tr class="odd">
<td>Notes</td>
<td>Winter and summer temperatures, snowfall, humidity, etc.</td>
</tr>
</tbody>
</table>
</div>
<p><br></p>
<div id="trip">
<table>
<colgroup>
<col style="width: 17%" />
<col style="width: 82%" />
</colgroup>
<thead>
<tr class="header">
<th></th>
<th><strong>trip</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Analysis</td>
<td>Family vacation plan</td>
</tr>
<tr class="even">
<td>Repository</td>
<td><a href="https://github.com/arni-magnusson/trip"
class="uri">https://github.com/arni-magnusson/trip</a></td>
</tr>
<tr class="odd">
<td>Methods</td>
<td>World map with flight routes, testing R Markdown and HTML</td>
</tr>
<tr class="even">
<td>External deps</td>
<td>Many CRAN packages</td>
</tr>
<tr class="odd">
<td>Data sources</td>
<td>2 local files</td>
</tr>
<tr class="even">
<td>Results</td>
<td>2 tables, 1 map</td>
</tr>
<tr class="odd">
<td>Notes</td>
<td>Creates the webpage <a href="https://arni-magnusson.github.io/trip/"
class="uri">https://arni-magnusson.github.io/trip/</a></td>
</tr>
</tbody>
</table>
</div>
